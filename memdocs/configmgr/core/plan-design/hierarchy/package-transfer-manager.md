---
title: 包传输管理器
titleSuffix: Configuration Manager
description: 了解 Configuration Manager 中的包传输管理器如何将内容从站点服务器传输到远程分发点。
ms.date: 02/8/2017
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: 3359f254-dd48-42b7-9eab-c92a3417e3fb
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: b450c45342793b89d41a2d96b8a7340939899093
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/21/2020
ms.locfileid: "81706505"
---
# <a name="package-transfer-manager-in-configuration-manager"></a>Configuration Manager 中的包传输管理器

适用范围：  Configuration Manager (Current Branch)

在 Configuration Manager 站点中，包传输管理器是 SMS_Executive 服务的组件，用于管理将内容从站点服务器计算机传输到站点内远程分发点。 （远程分发点是不位于站点服务器计算机上的分发点。）包传输管理器不支持由管理员配置，但了解它的工作方式有助于规划内容管理基础结构。 还能帮助解决内容分发方面的问题。


将内容分发到站点上的一个或多个远程分发点时，“分发管理器”  创建内容传输作业。 然后，它会通知主站点和辅助站点服务器上的包传输管理器将内容传输到远程分发点。

 包传输管理器会在站点服务器上的“pkgxfermgr.log”  文件中记录其操作。 你只能在此日志文件中查看包传输管理器的活动。  

> [!NOTE]  
>  在 Configuration Manager 的以前版本中，分发管理器管理将内容传输至远程分发点。 分发管理器还管理站点间的内容传输。 借助 Configuration Manager，分发管理器将继续管理两个站点间的内容传输。 但是，包传输管理器现在可管理向大量分发点传输内容。 这有助于提高在站点之间部署内容以及将内容部署到站点内的分发点的整体性能。  

为了将内容传输到独立的分发点，包传输管理器会像分发管理器在以前的 Configuration Manager 版本中那样运行。 即，对到每个远程分发点的文件传输进行主动管理。 但是，为了将内容分发到请求分发点，包传输管理器会通知请求分发点内容可用。 请求分发点随后接管传输过程。  

下列信息描述了包传输管理器如何管理将内容传输至标准分发点以及配置为请求分发点的分发点的方式：
1.  **管理员将内容部署到站点中的一个或多个分发点。**  

    -   **标准分发点：** 分发管理器为该内容创建内容传输作业。  

    -   **拉取分发点：** 分发管理器为该内容创建内容传输作业。  

2.  **分发管理器运行初步检查。**  

    -   **标准分发点：** 分发管理器运行基本检查，以确认每个分发点都可以接收内容。 在进行此检查后，分发管理器将通知包传输管理器开始将内容传输至该分发点。  

    -   **拉取分发点：** 分发管理器启动包传输管理器，然后，包传输管理器通知拉取分发点有新的内容传输作业。 分发管理器不会检查本身为请求分发点的远程分发点的状态，因为每个请求分发点将管理其自己的内容传输。  

3.  **包传输管理器准备传输内容。**  

    -   **标准分发点：** 包传输管理器检查每个指定远程分发点的单一实例内容存储。 目的是标识已经在该分发点上的任何文件。 然后，包传输管理器会进行排队以仅传输还不存在的那些文件。  

        > [!NOTE]  
        >  若要将分发中的每个文件复制到分发点（即使该分发点的单一实例存储中已经存在这些文件也不例外），对内容使用“重新分发”  操作。  

    -   **拉取分发点：** 对于分发中的每个拉取分发点，包传输管理器会检查拉取分发点的源分发点以确认是否有内容可用。  

        -   当至少一个源分发点有可用内容时，包传输管理器会向该请求分发点发送通知。 该通知指示分发点开始传输内容。 此通知包括文件名和大小、属性和哈希值。  

        -   如果尚未提供内容，则包传输管理器不会向分发点发送通知。 而是会每 20 分钟重复进行一次检查，直到有可用的内容为止。 然后，当有可用的内容时，包传输管理器会向该请求分发点发送通知。  

        > [!NOTE]  
        >  为使请求分发点将分发中的每个文件复制到分发点（即使该请求分发点的单一实例存储中已经存在这些文件也不例外），对内容使用“重新分发”  操作。  

4.  **此时内容将开始传输。**  

    -   **标准分发点：** 包传输管理器会将文件复制到每个远程分发点。 在传输至标准分发点期间：  

        -   默认情况下，包传输管理器可以同时处理三个唯一的包，并且可以并行将其分发给五个分发点。 这些设置统称为“并发分发设置”  。 若要设置并发分发，请在每个站点的“软件分发组件属性”  中转至“常规”  选项卡。  

        -   将内容传输至每个分发点时，包传输管理器使用该分发点的计划和网络带宽配置。 若要配置这些设置，可在每个远程分发点的“属性”  中，转到“计划”  和“速率限制”  选项卡。 有关详细信息，请参阅[管理 Configuration Manager 的内容和内容基础结构](../../../core/servers/deploy/configure/manage-content-and-content-infrastructure.md)。  

    -   **拉取分发点：** 当请求分发点收到通知文件时，分发点将开始内容传输过程。 此传输过程在每个请求分发点上独立运行：  

        1.   请求分发将标识在其单一实例存储中还没有的内容分发中的文件，并准备从其源分发点之一中下载该内容。  

        2.   然后，该请求分发点会按顺序检查其每个源分发点，直到找到具有可用内容的源分发点为止。 当请求分发点标识具有内容的源分发点时，它将开始下载该内容。  

        > [!NOTE]  
        >  请求分发点下载内容的过程与 Configuration Manager 客户端使用的过程相同。 对于请求分发点的内容传输，不会使用并行传输设置。 也不会使用为标准分发点配置的计划和限制选项。  

5.  **内容传输完成。**  

    -   **标准分发点：** 当包传输管理器将文件传输到每个指定的远程分发点后，它将验证分发点上内容的哈希。 然后通知分发管理器分发已完成。  

    -   **拉取分发点：** 在拉取分发点完成内容下载后，该分发点会验证内容的哈希。 然后将状态消息提交至站点管理点以指明成功。 如果 60 分钟后未收到此状态，会再次唤醒包传输管理器。 它会检查请求分发点以确认请求分发点是否已下载内容。 如果内容下载正在进行，则包传输管理器将再休眠 60 分钟，之后再次与请求分发点核对。 此循环将持续，直至请求分发点完成内容传输。  
