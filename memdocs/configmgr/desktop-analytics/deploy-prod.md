---
title: 如何部署到生产
titleSuffix: Configuration Manager
description: 关于部署到桌面分析生产组的操作指南。
ms.date: 06/14/2019
ms.prod: configuration-manager
ms.technology: configmgr-analytics
ms.topic: conceptual
ms.assetid: 637fbd8e-b8ea-4c7e-95ee-a60a323c496e
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.reviewer: acabello
ms.openlocfilehash: 0a7ffe8eea1048e696ce7dd254d58364226efc58
ms.sourcegitcommit: fddbb6c20cf7e19944944d4f81788adf249c963f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/12/2020
ms.locfileid: "83268772"
---
# <a name="how-to-deploy-to-production-with-desktop-analytics"></a>如何通过桌面分析部署到生产

[部署到试点](deploy-pilot.md)并查看资产状态后，便可以更新生产环境的其余部分。

[!INCLUDE [Definition of pilot and production](includes/define-pilot-prod.md)]

将更新部署到生产设备包括三个主要部分：

1. [查看需要升级决策的资产](#bkmk_review)：若要使设备可用于生产部署，其资产的升级决策必须设置为“就绪”  或“就绪，需要修正”  。  

2. [部署到就绪的设备](#bkmk_deploy)：使用 Configuration Manager 更新已就绪的设备。 桌面分析提供可用于生产部署的设备列表，以及用于监视部署是否成功的报表。  

3. [监视已更新设备的运行状况](#bkmk_monitor)：在更新部署过程中，监视重要资产的运行状况。 如果需要注意一些问题，请排除故障并解决问题。 如果你确定不能解决问题，请通过将升级决策设置为“无法”  来停止对受影响设备的部署。  

> [!NOTE]  
> 当你确信试点部署成功时，可随时开始生产部署。 不要求所有试点设备首先达到“已完成”状态。  



## <a name="review-assets-that-need-an-upgrade-decision"></a><a name="bkmk_review"></a> 查看需要升级决策的资产

桌面分析会指导你完成检查资产以进行生产部署的过程。 在 Azure 门户中，转到“部署计划”  ，选择部署计划，然后在左侧菜单中选择“准备生产”  。

![桌面分析中准备生产视图的屏幕截图](media/prepare-production.png)

查看各应用的状态。 使用该信息设置每个资产的升级决策。

使用每个选项卡来查看应用的状态。 在每个选项卡式视图中，你可以对结果进行筛选，以显示跟踪升级、需要注意的设备、具有混合结果的设备以及处于不确定状态的设备。

选择“达成目标”  ，根据以下条件将视图筛选为可能已准备好进行生产部署的资产：

- 风险：对更新已安装此资产的设备的已知风险的升级前评估  

- 运行状况状态：对其他部署中的设备以及在安装更新后它们是否遇到问题的升级后评估。 有关运行状况的详细信息，请参阅[监视已更新设备的运行状况](#bkmk_monitor)。  

若要批准某个资产进行升级，请在列表中选择名称，然后从“升级决策”  列表中选择以下选项之一：

- 正在评审
- 准备就绪
- 就绪（带有修正）
- 无法
- 未评审

若要同时为多个应用设置此值，请使用第一列以“选择此项”  ，然后选择“设置升级决策”  。

![在多个应用上设置升级决策选项](media/prep-prod-set-upgrade-decision.png)

选择“无数据”  查看无法分类的资产。 这些资产通常是没有足够的覆盖范围可供桌面分析执行风险或运行状况分析的资产。 若要改善覆盖范围，请将包含这些资产的其他设备添加到试点中，或让试点用户尝试这些资产。

还可能存在处于“需要注意”  或“混合结果”  状态的资产。 在对这些资产制定升级决策之前，可能需要进行其他评审。

查看所有应用。 一旦给定设备的所有资产的升级决策都是肯定的，其状态便更改为“生产准备就绪”。 若要查看部署计划主页上的当前计数，请选择第三个部署步骤“部署”  。


## <a name="deploy-to-devices-that-are-ready"></a><a name="bkmk_deploy"></a> 部署到就绪的设备

Configuration Manager 使用桌面分析中的数据来创建生产部署的集合。 不要使用传统部署来部署任务序列。 使用以下过程创建桌面分析集成的部署：

如果已按照推荐的过程[部署到试点设备](deploy-pilot.md#deploy-to-pilot-devices)，则 Configuration Manager 分阶段部署已准备就绪。 将资产标记为“就绪”  时，桌面分析会自动将这些设备同步到 Configuration Manager。 然后将这些设备添加到生产集合。 当分阶段部署进入第二阶段时，这些生产设备将接收升级部署。

如果将分阶段部署配置为“手动开始第二阶段部署”  ，则需要手动将其移到下一阶段。 有关详细信息，请参阅[管理和监视分阶段部署](../osd/deploy-use/manage-monitor-phased-deployments.md#bkmk_move)。

如果创建了桌面分析集成的到试点集合的单一部署，则需要重复该过程以部署到生产集合。


### <a name="address-deployment-alerts"></a>解决部署警报

对于试点部署，桌面分析会告知你在生产部署过程中需要关注的所有问题。 在桌面分析中，转到部署计划，然后在左侧菜单中选择“部署状态”  。 部署状态视图按下列类别列出设备：  

- 未启动
- 正在进行
- 完成
- 需要注意 - 设备（按设备名称排序）
- 需要注意 - 问题（按问题类型排序）

![桌面分析生产部署状态的屏幕截图](media/prod-deployment-status.png)


## <a name="monitor-the-health-of-updated-devices"></a><a name="bkmk_monitor"></a> 监视已更新设备的运行状况

“准备生产”  页重点介绍如何帮助你为资产制定升级决策。 默认情况下，该页仅显示那些尚未处于“就绪”  状态的资产。 “监视运行状况”  页显示了任何值得注意的资产（甚至包括标记为“就绪”的资产）的运行状况问题  。 如果发现问题，你可以排除故障并解决问题，或将升级决策更改为“无法”  。 当你更改升级决策时，此操作会阻止将来在具有该资产的设备上升级。

按具有以下运行状况状态的资产筛选此页面：

| 运行状况状态筛选器 | 说明 |
|----------------------|-------------|
| **需要注意** | （默认筛选器）桌面分析检测到该资产的某些运行状况指标有统计上的重大回归
| **达成目标** | 桌面分析在行为上检测不到回归 |
| **数据不足** | 桌面分析没有关于此资产的足够数据来进行任何建议 |
| **无数据** | 此资产尚无可用的使用情况数据 |

若要显示所有资产的未筛选视图，请选择当前筛选器。 此操作将删除该筛选器。

> [!NOTE]  
> 为了减少数据不足的资产数量，桌面分析会监视所有已升级到部署计划中指定的目标 Windows 版本的设备上的资产。 这些设备包括特定部署计划中未包含的那些设备。  

默认的排序顺序是按该特定资产发生事件的设备数量来排序，因此你可以快速查看哪些设备导致了大多数问题。 例如，当查看“应用”  时，它将按“过去两周出现应用崩溃的设备”  进行排序。

若要查看所有资产（甚至包括那些没有足够的数据供桌面分析进行统计推断的资产）的运行状况，请使用以下过程：

1. 在“过去两周发生事件的设备”列中，选择下拉列表  。 只向那些在最少数量的要关注的设备上发生了事件的资产添加筛选器。 例如，显示值大于  100 的项。  

2. 在“过去两周发生事件的设备的百分比”列中，选择下拉列表，然后选择按“降序”排序   。  

    生成的视图显示了事件数最少的情况下事件率最高的资产。  

3. 选择资产以获取更多详细信息或更改其升级决策。  

有关详细信息，请参阅[运行状况状态监视](health-status-monitoring.md)。
